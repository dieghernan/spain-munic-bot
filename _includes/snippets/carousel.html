{%- if include.internal -%}
  {% assign sort =  include.index_sort | default: 'modified_time' %}
  {%- assign bricks = site.static_files | where: "image_col", include.internal -%}
  {% if include.index_sort_asc %}
    {%- assign bricks = bricks | sort: "{{sort}}" | map: "path" -%}
  {% else %}
    {%- assign bricks = bricks | sort: "{{sort}}" | reverse | map: "path" -%}
  {% endif %}
{%- elsif include.external -%}
  {%- assign bricks = include.external | strip_newlines | replace: " " , "" |split: ","  -%}
{%- endif -%}
{%- assign interval =   include.interval | default: 2500   -%}
{%- assign end =   include.index_items | default: 100   -%}

{%- if bricks -%}
<!-- To be removed in production: RANDOM Generator -->
{%- assign bricks = bricks | sample: bricks.size   -%}
<!-- End -->
<div id="chulapaCarousel" class="carousel slide" data-ride="carousel" data-interval="{{- interval -}}">
  <ol class="carousel-indicators">
      {%- for brick in bricks limit: end -%}
	  {% if forloop.first == true %}
	  <li data-target="#chulapaCarousel" data-slide-to="{{ forloop.index0 }}" class="active"></li>
	  {% else %}
	  <li data-target="#chulapaCarousel" data-slide-to="{{ forloop.index0 }}"></li>
	  {% endif %}
      {%- endfor -%}
  </ol>	
  <div class="carousel-inner">
  {%- for brick in bricks limit: end -%}
    {% if forloop.first == true %}
        <div class="carousel-item active">
    {% else %}
        <div class="carousel-item">
    {% endif %}
	<img class="d-block w-100" src="{{- brick | absolute_url -}}" alt="Carousel Item #{{- forloop.index -}}">
	</div>  
  {%- endfor -%}
  </div>
  <a class="carousel-control-prev" href="#chulapaCarousel" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#chulapaCarousel" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
{%- endif -%}
